{
   "datasetGroup":{
      "name":"tgam-personalize"
   },
   "datasets":{
      "Interactions":{
          "name":"InteractionsDataset",
          "schema":{
                "type":"record",
                "name":"Interactions",
                "namespace":"com.amazonaws.personalize.schema",
                "fields":[
                    {
                        "name": "USER_ID",
                        "type": "string"
                    },
                    {
                        "name": "ITEM_ID",
                        "type": "string"
                    },
                    {
                        "name": "TIMESTAMP",
                        "type": "long"
                    },
                    {
                        "name": "EVENT_TYPE",
                        "type": "string"
                    },
                    {
                        "name": "visitor_type",
                        "type": [
                            "string",
                            "null"
                        ],
                        "categorical": true
                    },
                    {
                        "name": "visitor_countrycode",
                        "type": [
                            "string",
                            "null"
                        ],
                        "categorical": true
                    },
                    {
                        "name": "device_detector_visitorplatform",
                        "type": [
                            "string",
                            "null"
                        ],
                        "categorical": true
                    },
                    {
                        "name": "device_detector_brandname",
                        "type": [
                            "string",
                            "null"
                        ],
                        "categorical": true
                    },
                    {
                        "name": "device_detector_browserfamily",
                        "type": [
                            "string",
                            "null"
                        ],
                        "categorical": true
                    }
                ],
                "version":"1.0"
          }
      },
      "Items":{
          "name":"ItemsDataset",
          "schema":{
            "type":"record",
            "name":"Items",
            "namespace":"com.amazonaws.personalize.schema",
            "fields":[
                {
                    "name": "ITEM_ID",
                    "type": "string"
                },
                {
                    "name": "CREATION_TIMESTAMP",
                    "type": "long"
                },
                {
                    "name": "ContentText",
                    "type": [
                        "string",
                        "null"
                    ],
                    "textual": true
                },
                {
                    "name": "Category",
                    "type": [
                        "string",
                        "null"
                    ],
                    "categorical": true
                },
                {
                    "name": "WordCount",
                    "type": [
                        "int",
                        "null"
                    ]
                }
            ],
            "version":"1.0"
          }
      }
   },
   "solutions":{
      "userPersonalization":{
         "name":"tgam-personalize-userPersonalizationSolution",
         "recipeArn":"arn:aws:personalize:::recipe/aws-user-personalization",
         "solutionConfig":{
             "algorithmHyperParameters":{
                 "bptt":"30",
                 "hidden_dimension":"56",
                 "recency_mask":"true"
             }
         }
      },
      "similarItems":{
         "name":"tgam-personalize-similarItemsSolution",
         "recipeArn":"arn:aws:personalize:::recipe/aws-similar-items"
      }
   },
   "eventTracker":{
      "name":"tgam-personalize-event-tracker"
   },
   "campaigns":{
      "userPersonalizationCampaign":{
         "name":"tgam-personalize-userPersonalizationCampaign",
         "minProvisionedTPS":1,
         "campaignConfig":{
             "itemExplorationConfig":{
                 "explorationWeight": "0.3",
                 "explorationItemAgeCutOff": "1"
             }
         }
      },
      "similarItemsCampaign":{
         "name":"tgam-personalize-similarItemsCampaign",
         "minProvisionedTPS":1
      }
   },
   "userPersonalizationUpdates":{
       "trainingMode": "FULL"
   },
   "filters":
   [
       {
            "name":"tgam-personalize-category",
            "filterExpression":"INCLUDE ItemID WHERE Items.Category IN ($category) | EXCLUDE ItemID WHERE Interactions.event_type IN (\"page_view\")"
       },
       {
            "name":"tgam-personalize-read",
            "filterExpression":"INCLUDE ItemID WHERE Interactions.event_type IN (\"page_view\")"
       },
       {
            "name":"tgam-personalize-unread",
            "filterExpression":"EXCLUDE ItemID WHERE Interactions.event_type IN (\"page_view\")"
       }
   ]
}